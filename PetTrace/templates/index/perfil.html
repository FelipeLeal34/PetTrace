{% load static %}
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!--Intalar crooper-->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.js"></script>

        
        <link rel="stylesheet" type="text/css" href="{% static 'css/perfil.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'css/default.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'css/publicaciones.css' %}">



        
        
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
        <title>Perfil usuario</title>
    </head>
<body>
   {% include 'default/header.html' %}

   {% include 'publicaciones/ventanaModalPerdidas.html' %}
   {% include 'publicaciones/ventanaModalEncontradas.html' %}
   {% include 'publicaciones/ventanaModalAdopciones.html' %}

   {% include 'publicaciones/editarPubliPerdidas.html' %}
   {% include 'publicaciones/editarPubliEncontradas.html' %}
   {% include 'publicaciones/editarPubliAdopciones.html' %} 


   
    <main class="main">
        <div id="contenedor">
            
            <div id="contenido">
                <div id="contImg">
                    <img src="{% static 'img/fotoperfil.jpg' %}" id="imgperfil" data-modal="modal1">
                </div>
                <div id="informacion-perfil">
                <div id="perfil">
                    <h1>Nombre de usuario: {{ usuario.username }}</h1>

                    <div id="descripcion">
                        <h2>Descripción: <br><span id="texto-descripcion">{{ usuario.perfil.descripcion }}</span></h2>
                        <a id="enlace-editar" onclick="mostrarFormulario()"><i class="fa-solid fa-pencil"></i>Editar descripción</a>
                        <!-- Este es el elemento oculto que contiene el formulario -->
                        <div id="formulario-editar" style="display: none;">
                            <textarea type="textarea" id="input-descripcion">{{ usuario.perfil.descripcion }}</textarea>
                            <button id="boton-guardar" onclick="enviarFormulario()">Guardar</button>
                        </div>
                    </div>
                    
                </div>
                
                <div id="infoUsu">
                    <h1>Información de usuario</h1>
                    <ul>
                        <li><i class="fas fa-map-marker-alt"></i> Ubicación: {{ usuario.localidad }}</li>
                        <li><i class="fas fa-phone"></i> Contacto: <br> Telefono: {{ usuario.telefono }}, <br>Correo: {{ usuario.email }}</li>
                        <li><i class="fas fa-paw"></i> Miembro desde: <br> {{ usuario.perfil.fecha_creacion }}</li>
                    </ul>
                </div>
            </div>



          


                <div class="publis-perfil">

                    <div  class="titulo-perdidas">
						<div class="titulo">
						<h2 style="color: #fff;">PUBLICACIONES</h2>
						<hr style="border: 1px #fff solid;">
						</div>
					</div>

                <div id="apartados">


                    

                    <div id="apartados-mascotas">
                    <label class="apartados-a-perfil" data-apartado="1">Perdidas</label>
                    <label class="apartados-a-perfil" data-apartado="2">Encontradas</label>
                    <label class="apartados-a-perfil" data-apartado="3">Adopciones</label>
                </div>

                <div id="label-favoritas">
                    <label href="" class="apartados-a-perfil" data-apartado="4">Favoritas</label>
                </div>

                </div>


                <div id="publicaciones">

                    <div id="apartados-contenedor">


					

                    <div id="perdidas" class="apartado-perfil">

					{% if perdidas|length == 0 %}


						<h1 style="color: #fff; background-color: none;  text-align: center;">¡El usuario no ha realizado publicaciones de mascotas perdidas!</h1>


					{% else %}


						{% for publicacion in perdidas %}
							
							{% include 'publicaciones/publicacionPerdidas.html' %}
							
						{% endfor %}

					{% endif %}


                    </div>

                    <div id="encontradas" class="apartado-perfil">

					{% if encontradas|length == 0 %}


						<h1 style="color: #fff; background-color: none;  text-align: center;">¡El usuario no ha realizado publicaciones de mascotas Encontradas!</h1>


					{% else %}

                     	{% for publicacion in encontradas %}
						
						 	{% include 'publicaciones/publicacionEncontradas.html' %}

            			{% endfor %}

					{% endif %}
                    </div>

                    <div id="adopciones" class="apartado-perfil">

						{% if adopciones|length == 0 %}


						<h1 style="color: #fff; background-color: none;  text-align: center;">¡El usuario no ha realizado publicaciones de mascotas en adopción!</h1>


						{% else %}


							{% for publicacion in adopciones %}

								{% include 'publicaciones/publicacionAdopciones.html' %}

							{% endfor %}

						{% endif %}
                    </div>

                    <div id="favoritas" class="apartado-perfil">

						{% if favoritas|length == 0 %}


						<h1 style="color: #fff; background-color: none;  text-align: center;">¡El usuario no ha agregado ninguna publicacion a favoritas!</h1>


						{% else %}

                        	{% for publicacion in favoritas %}
                        
                       			{% if publicacion.apartado == 'perdidas' %}

								   {% include 'publicaciones/publicacionPerdidas.html' %}
								   
                       			{% elif publicacion.apartado == 'encontradas' %}
								   						
								   {% include 'publicaciones/publicacionEncontradas.html' %}

                       			{% else %}

								   {% include 'publicaciones/publicacionAdopciones.html' %}


                        		{% endif %}

                        	{% endfor %}

						{% endif %}

						
                    </div>
                
                </div>
            
            </div>


            </div>
        </div>




		

        <!-- Div para mostrar img de perfil del usuario -->
        <div id="modal1" class="filtros-box">
                <div id="opciones">
                    <span class="close" id="close1">&times;</span>
                    <p>¿Qué quieres hacer con la imagen?</p>
                <div class="categoria-filtro">
                    <span>Ver imagen</span>
                </div>
                <div class="categoria-filtro">
                    <span>Cambiar imagen</span>
                    <input type="file" id="file-input" style="display: none;">
                </div>
            </div>
        </div>
          <!-- Este es el modal para mostrar la imagen en mayor tamaño -->
        <div id="modal-content" class="modal">
            <img src="{% static 'img/fotoperfil.jpg' %}" id="imgperfil-modal">
            <span class="close" id="close2">&times;</span>    
        </div>
        <!-- Este es el modal para el recortador de imágenes -->
        <div id="modal-cropper" class="modal">
            <!-- Este es el canvas para el recortador de imágenes -->
            <canvas id="canvas-cropper" class="cropper-canvas"></canvas>
            <span class="close" id="close3">&times;</span>
        </div>
          
    </main>    
    {% include 'default/footer.html' %}

       
    <script src="{% static 'js/perfil.js' %}"></script>
    
    <script type="module" src="{% static 'js/perdidas.js' %}"></script>
    <script type="module" src="{% static 'js/publicaciones.js' %}"></script>
    <!-- <script type="module" src="{% static 'js/perdidas.js' %}"></script> -->
        </body>
        </html>